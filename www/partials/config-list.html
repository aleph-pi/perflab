<div class="container">
  <div class="row">
	<div class="col-md-12">
	  <div class="card">
		<div class="card-header">
		  <span>Configurations</span>
		  <span class="float-right">
<div class="btn-group">
  <button type="button" class="fixed-button btn btn-sm btn-primary dropdown-toggle"
		  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">New
  </button>
  <ul class="dropdown-menu dropdown-menu-right">
	<a class="dropdown-item" ng-repeat="agent in agents" href="#/config/new/{{agent.key}}">{{agent.name}}</a>
  </ul>
</div>
<div class="btn-group">
<button type="button" class="fixed-button btn btn-sm btn-primary dropdown-toggle" title="view settings"
	data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">View
</button>
<div class="dropdown-menu dropdown-menu-right" class="fa-ul">
  <h5 class="dropdown-header">Sort by...</h5>
  <a class="dropdown-item bfa-icon" ng-class="{'fa-check': sort === 'name'}" href="" ng-click="setSort('name')">Name</a>
  <a class="dropdown-item bfa-icon" ng-class="{'fa-check': sort === 'pri'}" href="" ng-click="setSort('pri')">Run order</a>
  <div class="dropdown-divider"></div>
  <h5 class="dropdown-header">Filter</h5>
  <a class="dropdown-item bfa-icon" ng-class="{'fa-check': filter}" href="" ng-click="toggleFilter()">Hide inactive</a>
</div>
</div>
		</span>
		</div>
		<div class="card-body">
		  <div class="alert alert-info" ng-show="configs.loading()">Loading...</div>
		  <div class="alert alert-warning" ng-show="configs.all && !configs.all.length">None</div>
		  <table class="table table-sm table-striped config-list">
			<tbody>
<tr ng-repeat="config in configs.all | orderBy:predicate track by config._id" class="config" ng-hide="filter && !(config.queue.enabled || config.queue.running)">
<td width="80%" class="name">
  <span ng-class="{strike: !config.queue.enabled}">{{config.name}}</span><span ng-if="config.queue.state === 'error'" class="fas fa-warning"></span>
</td>
<td width="180px" nowrap>
<div ng-if="config.queue.running" class="progress" title="{{config.queue.state}}">
  <div class="progress-bar progress-bar-striped active" ng-class="{'progress-bar-info': !config.testing}" role="progressbar" aria-valuenow="{{config.progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{config.progress}}%;">
	<span ng-if="!config.testing">{{config.queue.state}}</span>
  </div>
</div>
</td>
<td><div class="btn-group">
  <button type="button" class="btn btn-sm btn-primary dropdown-toggle" title="Queue settings" ng-class="{'btn-danger': config.queue.priority}"
	data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	<!-- <span class="fas fa-caret-down"></span> -->
	<span class="fas" ng-class="config.queue.enabled ? (config.queue.repeat ? 'fa-redo-alt' : 'fa-play') : 'fa-pause'">
  </button>
  <div class="dropdown-menu">
	<a class="dropdown-item" ng-class="{disabled: !config.queue.enabled}" href="" ng-click="configs.setEnabled(config._id, false)"><span class="fas fa-pause"></span> Disable</a>
	<a class="dropdown-item" ng-class="{disabled: config.queue.enabled && !config.queue.repeat}" href="" ng-click="configs.setRepeat(config._id, false)"><span class="fas fa-play"></span> Run once</a>
	<a class="dropdown-item" ng-class="{disabled: config.queue.enabled && config.queue.repeat}" href="" ng-click="configs.setRepeat(config._id, true)"><span class="fas fa-redo-alt"></span> Repeat</a>
	<div class="dropdown-divider"></div>
	<a class="dropdown-item" href="" ng-click="configs.togglePriority(config._id)">
	  <span class="fas" ng-class="config.queue.priority ? 'fa-level-down' : 'fa-level-up'"></span> Change priority</a>
	</a>
  </div>
</div></td>
<td nowrap align="right">
  <a href="#/config/run/{{config._id}}/" class="icon-button btn btn-sm btn-primary"><span class="fas fa-chart-bar" title="Graph"></span></a>
  <a href="#/config/run/{{config._id}}/list/" class="icon-button btn btn-sm btn-primary"><span class="fas fa-bars" title="List"></span></a>
  <a href="/api/config/run/{{config._id}}/stats" class="icon-button btn btn-sm btn-primary"><span class="fas fa-download" title="Export CSV"></span></a>
  <a href="#/config/edit/{{config.type}}/{{config._id}}" class="icon-button btn btn-sm btn-primary"><span class="fas fa-cog" title="Edit"></span></a>
</td>
</tr>
			</tbody>
		  </table>
		</div>
	  </div>
	</div>
  </div>
</div>
